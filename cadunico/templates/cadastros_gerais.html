{% extends "base_cadunico.html" %}
{% block styles %}
<link rel="stylesheet" href="/assets/data-tables-1.10.9/media/css/dataTables.bootstrap.min.css">
{% endblock %}

{% block page-header %}Cadastros e Atendimentos CadÚnico{% endblock%}{%block page-header-small%}{%endblock%}

{% block conteudo %}

<table id="cadastros" class="table table-striped table-bordered" data-page-length='50' cellspacing="0" width="100%">
    <thead>
        <tr>
            <th></th>
            <th style="width:20%;">Município</th>
            <th>População</th>
            <!--<th>Pessoas Cadastradas</th>-->
            <th>% População Cadastrada CadÚnico</th>
            <!--<th>Famílias Cadastradas</th>-->
            <!--<th>Famílias Beneficiadas pelo PBF</th>-->
            <th>% Famílias Cadastradas CadÚnico Beneficiadas pelo PBF</th>
            <th>% Pessoas Beneficiadas pelo PBF - População Geral</th>
            <th>IDH</th>
            <th>Valor Pago R$</th>
        </tr>
    </thead>

    <tfoot>
    </tfoot>

    <tbody>
        {% for m in municipios %}       
        <tr>
            <td></td>
            <td style="width:20%;">{{ m.municipio.municipio }}</td>
            <td class="dados-numericos-tabela">{{ m.populacao|floatformat:0 }}</td>
            <!--<td>{{ m.pessoas_cadunico|floatformat:0 }}</td>-->
            <td class="dados-numericos-tabela">{{ m.porc_pessoas_cadastradas|floatformat:2 }}%</td>
            <!--<td>{{ m.familias_cadunico|floatformat:0 }}</td>-->
            <!--<td>{{ m.familias_cadunico_atendidas|floatformat:0 }}</td>-->
            <td class="dados-numericos-tabela">{{ m.porc_familias_atendidas|floatformat:2 }}%</td>
            <td class="dados-numericos-tabela">{{ m.porc_pessoas_atendidas|floatformat:2 }}%</td>
            <td class="dados-numericos-tabela">{{ m.idh }}</td>
            <td class="dados-numericos-tabela">{{ m.valor_pago|floatformat:2 }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>

{% endblock %}

{% block scripts %}
    <script src="/assets/data-tables-1.10.9/media/js/jquery.dataTables.min.js"></script>
    <script src="/assets/data-tables-1.10.9/media/js/dataTables.bootstrap.min.js"></script>
    <script>
    $(document).ready(function() {
        var t = $('#cadastros').DataTable( {
            "columnDefs": [ {
                "searchable": false,
                "orderable": false,
                "targets": 0
            } ],
            "order": [[ 1, 'asc' ]],
                "language": {
                "lengthMenu": "Mostrar _MENU_ resultados por página",
                "zeroRecords": "Descuplpe, nada encontrado.",
                "info": "Apresentando página _PAGE_ de _PAGES_",
                "infoEmpty": "Sem resultados para apresentar",
                "infoFiltered": "(filtrando por um tottal de _MAX_ resultados)",
                "paginate": {
                    "first": "Início",
                    "last": "Fim",
                    "next": "Próximo",
                    "previous":"Anterior"
                },
                "search":"Buscar:",
            }
        } );
 
        t.on( 'order.dt search.dt', function () {
            t.column(0, {search:'applied', order:'applied'}).nodes().each( function (cell, i) {
                cell.innerHTML = i+1;
            } );
        } ).draw();
    } );
    </script>
{% endblock %}